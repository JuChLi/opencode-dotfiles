# Model 選擇完整指南

## 目錄

1. [Provider 概述](#1-provider-概述)
2. [模型詳細規格](#2-模型詳細規格)
3. [任務類型詳細推薦](#3-任務類型詳細推薦)
4. [成本優化策略](#4-成本優化策略)
5. [預設配置](#5-預設配置)
6. [實際範例](#6-實際範例)

---

## 1. Provider 概述

### MiniMax (Plus)

| 模型 | 擅長領域 | Token 效率 | 成本 |
|------|----------|------------|------|
| M2.1 | 基礎 coding、code review、簡單重構 | ⭐⭐⭐⭐⭐ | 低 |
| M2.5 | 複雜推理、架構設計、長上下文 | ⭐⭐⭐⭐ | 中 |
| M3 | 最高推理能力、long context | ⭐⭐⭐ | 高 |

**優勢**：
- 中文理解能力強
- 成本效益高
- 反應速度快

**劣勢**：
- 某些專業領域知識可能不如 GPT

---

### GLM (Pro)

| 模型 | 擅長領域 | Token 效率 | 成本 |
|------|----------|------------|------|
| GLM-4-flash | 簡單任務、快速回應 | ⭐⭐⭐⭐⭐ | 最低 |
| GLM-4 | 一般 coding、中等複雜度 | ⭐⭐⭐⭐ | 低 |

**優勢**：
- 成本最低
- 速度快

**劣勢**：
- 複雜推理能力較弱

---

### GPT (Plus)

| 模型 | 擅長領域 | Token 效率 | 成本 |
|------|----------|------------|------|
| GPT-4o-mini | 簡單 coding、quick tasks | ⭐⭐⭐⭐ | 低 |
| GPT-4o | 複雜推理、多語言、架構 | ⭐⭐⭐ | 中 |
| o1-mini | 深度推理、演算法 | ⭐⭐ | 高 |
| o1-preview | 最高推理能力 | ⭐ | 最高 |

**優勢**：
- 推理能力最強
- 知識庫最廣
- 支援最新技術

**劣勢**：
- 成本較高
- 中文表達可能不如 MiniMax

---

### GitHub Copilot (Pro+)

| 功能 | 說明 |
|------|------|
| 代碼補全 | 即時上下文理解 |
| 建議生成 | 根據專案風格自動學習 |
| 多語言支援 | 主流語言都能處理 |

**優勢**：
- 零對話 token 消耗
- 即時回應
- 上下文理解最佳

**劣勢**：
- 僅限補全，無法處理複雜任務

---

## 2. 模型詳細規格

### MiniMax 系列

| 模型 | Context Length | 適合場景 |
|------|---------------|----------|
| M2.1 | 32K | 簡單任務、快速處理 |
| M2.5 | 128K | 中等複雜度任務 |
| M3 | 200K+ | 大型專案、深度分析 |

### GLM 系列

| 模型 | Context Length | 適合場景 |
|------|---------------|----------|
| GLM-4-flash | 128K | 預算優先的簡單任務 |
| GLM-4 | 128K | 一般 coding 任務 |

### GPT 系列

| 模型 | Context Length | 適合場景 |
|------|---------------|----------|
| GPT-4o-mini | 128K | 簡單任務、成本敏感 |
| GPT-4o | 128K | 複雜推理、架構設計 |
| o1-mini | 200K | 困難演算法、數學問題 |
| o1-preview | 200K | 最複雜的推理任務 |

---

## 3. 任務類型詳細推薦

### 3.1 Code Completion（代碼補全）

| 場景 | 首選 | 理由 |
|------|------|------|
| 函式內補全 | Copilot Pro+ | 即時、零成本 |
| 整行建議 | Copilot Pro+ | 上下文理解最好 |
| 重複性代碼 | Copilot Pro+ | 自動學習專案風格 |
| 陌生語法 | Copilot Pro+ | 即時語法建議 |

**成本**：Copilot 訂閱制，無額外 token 消耗

---

### 3.2 Code Review（代碼審查）

| 複雜度 | 首選 | 備用 | 說明 |
|--------|------|------|------|
| 語法檢查 | MiniMax-M2.1 | GLM-4-flash | 快速檢查錯誤 |
| 邏輯錯誤 | MiniMax-M2.5 | GPT-4o-mini | 需要理解程式碼 |
| 安全漏洞 | GPT-4o | MiniMax-M2.5 | 需要深度分析 |
| 效能優化 | GPT-4o | MiniMax-M3 | 需要專業知識 |

**Token 消耗估算**：
- 單檔案 review：~1K-3K tokens
- 多檔案 review：~3K-10K tokens

---

### 3.3 Code Writing（代碼撰寫）

| 複雜度 | 首選 | 備用 | 說明 |
|--------|------|------|------|
| 簡單函式 | MiniMax-M2.1 | GLM-4-flash | 單一功能 |
| 中等功能 | MiniMax-M2.5 | GLM-4 | 2-5 個檔案 |
| API 設計 | MiniMax-M2.5 | GPT-4o | 需要邏輯設計 |
| 複雜演算法 | MiniMax-M3 | o1-mini | 需要深度推理 |
| 系統架構 | GPT-4o | MiniMax-M3 | 需要全面考量 |

**Token 消耗估算**：
- 簡單函式：~500-2K tokens
- 中等功能：~2K-5K tokens
- 複雜系統：~10K+ tokens

---

### 3.4 Debugging（除錯）

| 類型 | 首選 | 備用 | 說明 |
|------|------|------|------|
| 語法錯誤 | MiniMax-M2.1 | GLM-4-flash | 編譯器即可解決 |
| Runtime Error | MiniMax-M2.5 | GPT-4o | 需要分析錯誤訊息 |
| 邏輯 Bug | GPT-4o | MiniMax-M2.5 | 需要理解程式碼邏輯 |
| Deadlock | o1-mini | GPT-4o | 需要深度推理 |
| 效能問題 | GPT-4o | MiniMax-M3 | 需要專業知識 |

**Debug 流程建議**：
1. 先用 MiniMax-M2.1 快速定位問題
2. 複雜問題升級到 MiniMax-M2.5 或 GPT-4o
3. 極困難問題使用 o1-mini

---

### 3.5 Refactoring（重構）

| 類型 | 首選 | 備用 | 說明 |
|------|------|------|------|
| 命名優化 | MiniMax-M2.1 | Copilot | 簡單直接 |
| 風格統一 | MiniMax-M2.1 | GLM-4-flash | 規則明確 |
| 函式拆分 | MiniMax-M2.5 | GLM-4 | 需要理解職責 |
| 設計模式 | MiniMax-M2.5 | GPT-4o | 需要專業知識 |
| 大規模重構 | GPT-4o | MiniMax-M3 | 需要全面規劃 |

**Token 消耗估算**：
- 簡單重構：~1K-3K tokens
- 中等重構：~3K-10K tokens
- 大規模重構：~10K-50K tokens

---

### 3.6 Documentation（文檔）

| 類型 | 首選 | 備用 | 說明 |
|------|------|------|------|
| 程式註解 | MiniMax-M2.1 | GLM-4-flash | 簡單直接 |
| API 文檔 | MiniMax-M2.5 | GLM-4 | 需要完整說明 |
| 技術文件 | GPT-4o | MiniMax-M2.5 | 需要深度說明 |
| 英文文檔 | GPT-4o | - | 英文表達更好 |

---

## 4. 成本優化策略

### 4.1 層次化使用原則

```
┌─────────────────────────────────────────────┐
│ 100% 工作量                                   │
├─────────────────────────────────────────────┤
│ 40% → Copilot Pro+ （補全）                  │
│     └─ 零額外 token 消耗                       │
│                                               │
│ 20% → MiniMax-M2.1 / GLM-4-flash            │
│     └─ 簡單任務、低成本                         │
│                                               │
│ 20% → MiniMax-M2.5 / GLM-4                   │
│     └─ 中等任務、性價比最高                     │
│                                               │
│ 15% → GPT-4o / MiniMax-M3                   │
│     └─ 複雜任務、需要高品質                     │
│                                               │
│  5% → o1-mini                                │
│     └─ 極困難問題、最高推理                     │
└─────────────────────────────────────────────┘
```

### 4.2 具體優化技巧

| 技巧 | 說明 |
|------|------|
| 控制 context | 只提供相關檔案，避免整個專案 |
| 簡化 prompt | 精確描述需求，避免冗長 |
| 分段處理 | 大任務拆分多個小任務 |
| 善用 streaming | 即時終止不需要的輸出 |
| 選擇正確模型 | 不用大炮打小鳥 |

### 4.3 避免浪費

| 錯誤做法 | 正確做法 |
|----------|----------|
| 用 GPT-4o 處理簡單任務 | 用 MiniMax-M2.1 |
| 一次輸入整個專案 | 只輸入相關檔案 |
| 模糊的 prompt | 精確描述需求 |
| 不使用 Copilot | 優先用 Copilot 補全 |

---

## 5. 預設配置

### 5.1 OpenCode Plan/Build 預設

| 階段 | 預設模型 | 可升級 |
|------|---------|--------|
| **Plan** | MiniMax-M2.5 | GPT-4o（複雜任務）|
| **Build** | MiniMax-M2.5 | GPT-4o（複雜任務）|

### 5.2 任務複雜度對應

| 複雜度 | 判斷標準 | 建議模型 |
|--------|----------|----------|
| **低** | 單一檔案、单一功能 | MiniMax-M2.1 |
| **中** | 2-5 個檔案、需要邏輯 | MiniMax-M2.5 |
| **高** | 多檔案、架構設計 | GPT-4o |
| **極高** | 系統級、困難問題 | o1-mini |

---

## 6. 實際範例

### 範例 1：簡單函式撰寫

**使用者**：幫我寫一個排序函式

**分析**：
- 任務類型：Code Writing
- 複雜度：簡單
- 是否需要中文：是

**推薦**：
- 首選：MiniMax-M2.1
- 理由：簡單任務，成本低

---

### 範例 2：多檔案重構

**使用者**：帮我重构这个服务，将业务逻辑拆分出来

**分析**：
- 任務類型：Refactoring
- 複雜度：高
- 是否需要中文：是

**推薦**：
- 首選：MiniMax-M2.5
- 理由：需要理解多檔案邏輯，成本適中
- 備用：GPT-4o

---

### 範例 3：困難 Debug

**使用者**：这个 deadlock 怎么都找不到原因

**分析**：
- 任務類型：Debugging
- 複雜度：極高
- 是否需要中文：是

**推薦**：
- 首選：o1-mini
- 理由：困難問題需要深度推理

---

### 範例 4：系統架構設計

**使用者**：帮我设计一个微服务架构

**分析**：
- 任務類型：Architecture Design
- 複雜度：極高

**推薦**：
- 首選：GPT-4o
- 理由：需要全面專業知識

---

## 附錄：Model 選擇決策樹

```
開始
  │
  ▼
是 Code Completion？ ──是──→ Copilot Pro+
  │
  否
  ▼
任務複雜度？
  │
  ├─ 簡單 → 需要中文？ ──是──→ MiniMax-M2.1
  │              │
  │             否
  │              ▼
  │          GLM-4-flash
  │
  ├─ 中等 → 需要中文？ ──是──→ MiniMax-M2.5
  │              │
  │             否
  │              ▼
  │          GLM-4
  │
  ├─ 複雜 → 需要深度推理？ ──是──→ o1-mini
  │              │
  │             否
  │              ▼
  │          GPT-4o
  │
  └─ 極複雜 → o1-mini / o1-preview
```
